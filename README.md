# Сервис для Галины
## Функциональные возможности:
**Ролевая модель: админ, парикмахер, клиент**
  * **Администратор** : Управляет системой, добавляет и редактирует шаблоны уведомлений, управляет ролями пользователей.
  * **Парикмахер** : Добавляет расписание часов приема, может делать массовые рассылки, может менять время рассылки, может записать клиента на прием.
  * **Клиент** : Регистрируется, просматривает расписание приемов, может записаться на прием.

## Стек технологий:
**FastAPI** :
  * Создание API для управления расписанием, записями на прием, отправки уведомлений и управления шаблонами.
  * Аутентификация и авторизация пользователей через JWT-токены.
  * Эндпоинты для CRUD-операций (создание, чтение, обновление, удаление) для приемов и расписания приемов.

**SQLAlchemy** :
  * ORM для работы с базой данных, в которой хранятся:
  * Шаблоны уведомлений с переменными, которые заменяются на данные при отправке.
  * Логи отправленных уведомлений, чтобы администраторы могли отслеживать историю уведомлений.
  * Модели для шаблонов уведомлений, пользователей и логов.
  * Создание моделей для пользователей, расписания и записей приемов.
  * Связи между моделями (например, есть расписание рабочих дней на месяц и у каждого множество записей о часах приема).
  * Хранение данных о ролях пользователей с соответствующими разрешениями.

**Redis** :
  * **Кэширование данных о свободных часах** :
  * Хранение кэша о свободных часах, чтобы сократить нагрузку на базу данных при частых запросах.
  * Использование TTL (время жизни) для кэша, чтобы он обновлялся автоматически, так же он будет обновляться при обновлении свободных часов в БД.
  * **Хранение сессий** : Кэширование информации о сессиях пользователей для быстрой авторизации.

**Celery** :
  * **Асинхронная отправка уведомлений** :
  * Celery управляет отправкой уведомлений в фоновом режиме, чтобы не блокировать API во время массовой рассылки.
  * В зависимости от типа уведомления, система отправляет email, SMS, push-уведомления или сообщения в мессенджерах.

## Возможности проекта:
  * **Поддержка нескольких каналов уведомлений** :
  * **Мессенджеры** : Отправка уведомлений через API популярных мессенджеров (например, Telegram или WhatsApp).
  * **SMS** : Интеграция с SMS-платформами для отправки уведомлений.
  * **Управление шаблонами уведомлений** :
  * Администраторы могут создавать и редактировать шаблоны уведомлений через панель управления.
  * Шаблоны содержат переменные для подстановки данных, что позволяет адаптировать уведомления под каждого пользователя.
  * **Массовая рассылка** :
  * Система может отправлять уведомления большому количеству пользователей (например, о новом расписании на месяц).
  * Celery управляет очередью задач, обеспечивая асинхронную отправку без перегрузки системы.
  * **Кэширование для ускорения** :
  * Популярные шаблоны и пользовательские данные могут кэшироваться в Redis, чтобы сократить время на обработку при отправке массовых уведомлений.
  * **Фронтенд** :
  * Взаимодействие с пользователем происходит как через web-интерфейс, так и с помощью робота в телеграмм.

## Дополнительные функции:
  * **Планировщик уведомлений** :
  * Парикмахер может настроить отправку уведомлений по расписанию (например, напоминание за сутки до назначенного времени и за час до назначенного времени).
  * Парикмахер может настраивать массовую отправку уведомлений по заранее установленному времени.
  * **Персонализация уведомлений** :
  * Использование персонализированных шаблонов уведомлений с подстановкой динамических данных (например, имя пользователя, детали транзакции) и возможность отказаться от записи на прием.

## Пример использования:
  * **Парикмахер** :
1. Пользователь отмечает рабочие дни в календаре и правит часы приема, если это нужно
2. Утверждает это расписание на месяц, 
3. Celery отправляет сгенерированное уведомление через выбранный канал
  * **Клиет** :
1. Просматривает доступные дни для записи.
2. Выбирает день.
3. Выбирает вид услуги.
4. Выбирает, на какое время  хочет записаться.
  * **Администратор** :
1. Администратор создает шаблон уведомления о подтверждении заказа с переменными: {{ username }}, {{ date_time }}.
